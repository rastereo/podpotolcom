(()=>{var e={600:()=>{var e={access_token:"pzso0zyz60vrrh0fndjv1by8"},t=document.querySelector(".request__form"),n=t.querySelector(".request__button-submit"),i=n.textContent;n.onclick=function(){n.textContent="Отправляю…",n.disabled=!0;var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status?(t.reset(),n.textContent=i,n.disabled=!1):4==r.readyState&&(n.textContent=i,n.disabled=!1,alert("Ошибка: ".concat(r.status," (").concat(r.statusText,")")))};var o=t.name.value,s=t.phone.value,c=document.querySelector(".title").textContent;e.subject="Хотят обсудить проект!",e.text="Имя: ".concat(o,"\nТелефон: ").concat(s,"\nЗапрос пришел со страницы: ").concat(c);var a=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(e);return r.open("POST","https://postmail.invotes.com/send",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),!1},t.addEventListener("submit",(function(e){e.preventDefault()}))}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,n){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(o)?o:String(o)),r)}var o}n(600);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n}var n,i;return n=e,i=[{key:"_makeInvalidInput",value:function(e){e.classList.add(this._inputErrorClass)}},{key:"_removeInvalidInput",value:function(e){e.classList.remove(this._inputErrorClass)}},{key:"_showErrorMessage",value:function(e,t){t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideErrorMessage",value:function(e){e.classList.remove(this._errorClass),e.textContent=""}},{key:"_toggleInputValidation",value:function(e,t){e.validity.valid?(this._removeInvalidInput(e),this._hideErrorMessage(t)):(this._makeInvalidInput(e),this._showErrorMessage(e,t))}},{key:"_checkInputsInvalid",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_addDisabledSubmit",value:function(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}},{key:"_removeDisabledSubmit",value:function(){this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)}},{key:"_toggleDisabledSubmit",value:function(){this._checkInputsInvalid()?this._addDisabledSubmit():this._removeDisabledSubmit()}},{key:"_getErrorSelector",value:function(e){return this._error=this._form.querySelector(".request__error_name_".concat(e.name)),this._error}},{key:"_setEventListeners",value:function(e,t){var n=this;e.addEventListener("input",(function(){n._toggleInputValidation(e,t),n._toggleDisabledSubmit()}))}},{key:"enableValidation",value:function(){var e=this;this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){e._setEventListeners(t,e._getErrorSelector(t))}))}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._removeInvalidInput(t),e._hideErrorMessage(e._getErrorSelector(t))})),this._toggleDisabledSubmit()}}],i&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}var s=function(){function e(t){var n=t.data,i=t.callback;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=n.title,this._popupTitle=n.popupTitle,this._description=n.description,this._mainImages=n.mainImages,this._prices=n.prices,this._beds=n.beds,this._callback=i}var t,n;return t=e,(n=[{key:"_getTemplateCard",value:function(e,t){return document.querySelector(e).content.querySelector(t).cloneNode(!0)}},{key:"_getListItem",value:function(e,t){var n=document.createElement("li"),i=document.createElement("p");return i.textContent=e,i.classList.add(t),n.append(i),n}},{key:"renderMainBlock",value:function(){var e=this;this._mainBlockElement=document.querySelector(".title-block"),this._titleElement=this._mainBlockElement.querySelector(".title"),this._descriptionElement=this._mainBlockElement.querySelector(".title-block__description"),this._containerElement=this._mainBlockElement.querySelector(".title-block__grid"),this._titleElement.textContent=this._title,this._descriptionElement.textContent=this._description,this._mainImages.forEach((function(t){var n=document.createElement("img");n.src=t,n.classList.add("title-block__image"),n.alt="Фото ".concat(e._title),e._containerElement.append(n)}))}},{key:"renderPriceCard",value:function(e,t,n){var i=this;this._priceContainerElement=document.querySelector(n),this._prices.forEach((function(n){var r=i._getTemplateCard(e,t),o=r.querySelector(".price__title"),s=r.querySelector(".price__sizes"),c=r.querySelector(".price__options");o.textContent=n.title,n.sizes.forEach((function(e){s.append(i._getListItem(e,"price__size"))})),n.options.forEach((function(e){c.append(i._getListItem(e,"price__option"))})),i._priceContainerElement.append(r)}))}},{key:"renderCards",value:function(e,t,n){var i=this;this._assortmentContainertElement=document.querySelector(n),this._beds.forEach((function(n){var r=i._getTemplateCard(e,t),o=r.querySelector(".card__description"),s=r.querySelector(".card__image");o.textContent=n.name,s.src=n.cover,s.alt="Фото ".concat(i._popupTitle," «").concat(n.name,"»"),r.addEventListener("click",(function(){i._callback(n.images,i._popupTitle,n.name,n.description)})),i._assortmentContainertElement.append(r)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===c(r)?r:String(r)),i)}var r}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._carousel=document.querySelector(t.carouselSelector),this._sectionContainer=this._carousel.querySelector(t.sectionSelector),this._previewContainer=this._carousel.querySelector(t.prewiewSelector),this._prevBtn=this._carousel.querySelector(t.prevBtnSelector),this._nextBtn=this._carousel.querySelector(t.nextBtnSelector),this._slideSelector=t.slideSelector,this._prewiewItemSelector=t.previewItemSelector,this._previewClass=t.previewSelector,this._previeActiveClass=t.previeActiveClass,this._keyDown=this._handleNextSlide.bind(this),this._nextSlide=this._next.bind(this),this._prevSlide=this._prev.bind(this)}var t,n;return t=e,(n=[{key:"_render",value:function(){var e=this;this._offset=0,this._slides.forEach((function(t,n){n<e._currentIndex&&(e._offset+=t.offsetWidth)})),this._sectionContainer.style.transform="translateX(-".concat(this._offset,"px)"),this._previews.forEach((function(t,n){n===e._currentIndex?t.classList.add(e._previeActiveClass):t.classList.remove(e._previeActiveClass)}))}},{key:"_prev",value:function(){0===this._currentIndex?this._currentIndex=this._slides.length-1:this._currentIndex--,this._render()}},{key:"_next",value:function(){this._currentIndex===this._slides.length-1?this._currentIndex=0:this._currentIndex++,this._render()}},{key:"_goTo",value:function(e){e<0||e>this._slides.length-1||(this._currentIndex=e,this._render())}},{key:"_handleNextSlide",value:function(e){"ArrowLeft"===e.key&&this._prev(),"ArrowRight"===e.key&&this._next()}},{key:"_getListItem",value:function(e,t,n,i,r){var o=document.createElement("li"),s=document.createElement("img");return o.classList.add(e),s.classList.add(t),s.src=n,s.alt="Фото ".concat(i," ").concat(r),o.append(s),o}},{key:"_setEventListeners",value:function(){var e=this;this._prevBtn.addEventListener("click",this._prevSlide),this._nextBtn.addEventListener("click",this._nextSlide),document.addEventListener("keydown",this._keyDown),this._previews.forEach((function(t,n){t.addEventListener("click",(function(){return e._goTo(n)}))}))}},{key:"_removeEventListeners",value:function(){this._prevBtn.removeEventListener("click",this._prevSlide),this._nextBtn.removeEventListener("click",this._nextSlide),document.removeEventListener("keydown",this._keyDown)}},{key:"init",value:function(e,t,n){var i=this;this._currentIndex=0,this._sectionContainer.innerHTML="",this._previewContainer.innerHTML="",this._removeEventListeners(),e.forEach((function(e){var r=i._getListItem("carousel__section","carousel__image",e,t,n),o=i._getListItem("carousel__preview","carousel__preview-image",e,t,n);i._sectionContainer.append(r),i._previewContainer.append(o)})),this._slides=this._carousel.querySelectorAll(this._slideSelector),this._previews=this._carousel.querySelectorAll(this._prewiewItemSelector),this._render(),this._setEventListeners()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===u(r)?r:String(r)),i)}var r}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._closeEsc=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleTarget",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._closeEsc)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._closeEsc)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton=this._popup.querySelector(".popup__close-button"),this._closeButton.addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){return e._handleTarget(t)}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===_(r)?r:String(r)),i)}var r}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector(t)}var t,n;return t=e,(n=[{key:"render",value:function(e){this._container.textContent=e}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h=document.querySelector(".request__input_value_phone"),f=new i({formSelector:".request__form",inputSelector:".request__input",submitButtonSelector:".request__button-submit",inactiveButtonClass:"request__button-submit_disabled",inputErrorClass:"request__input_type_error",errorClass:"request__error_visible"},document.querySelector(".request__form")),y=new l({carouselSelector:".carousel",sectionSelector:".carousel__section-list",slideSelector:".carousel__section",prewiewSelector:".carousel__preview-list",previewItemSelector:".carousel__preview",prevBtnSelector:".carousel__button_type_prev-arrow",nextBtnSelector:".carousel__button_type_next-arrow",previeActiveClass:"carousel__preview_active"}),b=new d(".popup"),S=new v(".title_size_small"),g=new v(".title-block__description_type_popup"),E=new s({data:{title:"Кровать-чердак детская",popupTitle:"Кровать-чердак для детей",description:"Детские кровати-чердаки — находка для квартиры! Создают не только комфортное место для сна вашего ребёнка, но и освобождают местодля стола, дивана и шкафа в детской комнате. Часто, дети организуютпод кроватью «домик»",mainImages:["https://thumb.tildacdn.com/tild3238-6430-4638-b232-373333353934/-/format/webp/fhPI1CZpBsc.jpg","https://static.tildacdn.com/tild6661-3331-4865-b133-313636353064/54EA00BE-A79B-4AD8-B.jpeg","https://static.tildacdn.com/tild6135-3835-4136-a365-326230323866/12118986_85567202788.jpg"],prices:[{title:"Кровать-чердак",sizes:["90х200 — 29 900 ₽","120x200 — 35 400 ₽","140х200 — 39 100 ₽","160x200 — 45 400 ₽","180x200, 200x200 — от 51 500 ₽"],options:["Удлинение до 215 см — БЕСПЛАТНО","Бортик «Ростислав» — 1 100 ₽","Бортик «Бавария» — 5 200 ₽","Наклонная лестница — 2 500 ₽","Покраска лаком при ширине ДО 139см — 4 400 ₽, при ширине ОТ 140 см — 5 900 ₽","Покраска эмалью (краской, а не лаком): при ширине ДО 139см — 6200 ₽,  при ширине ОТ 140см — 7 000 ₽","Второй и каждый последующий цвет — 3 000 ₽"]},{title:"Дополнительно",sizes:["Полка под кровать — 5 000 ₽ в цвет кровати, габаритные размеры (ВхШхГ) не более 30х200х20"],options:["Выезд на замер внутри МКАД — 500 ₽","Макет кровати в 3D — 500 ₽","При заказе кровати замер и макет — БЕСПЛАТНО","Доставка и сборка за МКАД: в пределах ММК — 2 200 ₽, в пределах БМК — 3 500 ₽","Мы можем сделать бортик выше стандартного:40-60 см — 2000 ₽, выше 60 см от дна спального места обговаривается индивидуально."]}],beds:[{name:"Удобная",description:'Почему "Удобная"? Потому что это оказалось удобно, когда на подходе к дивану, столу, комоду, Вам не мешает нога. Вся нагрузка ложится на лестницу, кровать не теряет своей надежности.',cover:"https://static.tildacdn.com/tild6163-6337-4761-b663-643638313063/noroot.jpg",images:["https://static.tildacdn.com/tild3963-6563-4462-a361-383533346430/y_71e5de59.jpg","https://static.tildacdn.com/tild3665-3735-4863-b538-656161333161/20637874_14803650254.jpg","https://static.tildacdn.com/tild6163-6337-4761-b663-643638313063/noroot.jpg","https://static.tildacdn.com/tild3462-3631-4064-a231-633535656561/9SKGPdDNEE4.jpg","https://static.tildacdn.com/tild3961-3331-4634-b466-326337303663/DSC_50051.jpg"]},{name:"Мечта",description:"Вертикальные круглые столбики борта, отличительная черта этой модели. Всем известно, что вертикальные линии оптически увеличивают высоту. Этот вариант идеален для квартир с невысокими потолками.",cover:"https://static.tildacdn.com/tild3466-3531-4364-a438-666263366265/27858821_17580678576.jpg",images:["https://static.tildacdn.com/tild3466-3531-4364-a438-666263366265/27858821_17580678576.jpg","https://thumb.tildacdn.com/tild6366-3934-4930-b863-343731383763/IMG_3143.jpg","https://thumb.tildacdn.com/tild3430-6630-4434-b833-386538326338/Bmh2HuTUwU8.jpg","https://thumb.tildacdn.com/tild6433-3466-4535-a262-313134353138/DSC_50051.jpg","https://thumb.tildacdn.com/tild3436-3531-4335-a134-633930643936/CSBN2313.jpg"]},{name:"Бавария",description:"Нам бы хотелось думать, что бортик этой модели, вам напомнит стиль немецкой архитектуры - фахверк. Набирающая популярность модель у людей следящих за тенденциями в дизайне.",cover:"",images:[]},{name:"Парящая",description:"Вернее было бы назвать её Висящая, т.к. она опирается на стены- висит на них. Сэкономленое место позволяет придвинуть стол или диван, вплотную к стене.",cover:"",images:[]},{name:"Ростислав",description:"Модель для любителей четких и прямых линий. Частота расположения деталей борта может быть любой, что позволяет сделать кровать воздушной и в то же время безопасной для ребёнка, при необходимости.",cover:"",images:[]},{name:"для школьника студента",description:"Кровать - чердак для человека вступающего во взрослую жизнь имеет ряд своих особенностей. Из-за бурного роста, сделать её необходимо на комфортном расстоянии от потолка. Снизу нужно учесть не только необходимый стол для учебы, но и место для хранения письменных принадлежностей, книг, учебников",cover:"",images:[]}]},callback:function(e,t,n,i){y.init(e,t,n),S.render("".concat(t," «").concat(n,"»")),g.render(i),setTimeout((function(){return b.open()}),200)}});E.renderMainBlock(),E.renderPriceCard("#template-price-card",".price__card",".price"),E.renderCards("#template-card",".card",".assortment__container"),f.enableValidation(),f.resetValidation(),b.setEventListeners(),h.addEventListener("input",(function(e){var t,n,i=h.value.replace(/\D+/g,"");t=h.value.includes("+8")||"8"===h.value[0]?"":"+";for(var r=0;r<i.length&&r<11;r++){switch(r){case 0:t+="7"===(n=i[r])?"7 (":"8"===n?"8 (":"9"===n?"7 (9":"7 (";continue;case 4:t+=") ";break;case 7:case 9:t+="-"}t+=i[r]}h.value=t}))})()})();